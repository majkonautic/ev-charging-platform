<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CPMS Dashboard - EV Charging Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
        }
        
        .animate-pulse-gentle {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: .7;
            }
        }
    </style>
</head>
<body class="bg-slate-50">
    <!-- Header -->
    <header class="bg-white border-b border-slate-200 sticky top-0 z-40 backdrop-blur-lg bg-white/95">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center space-x-4">
                    <a href="index.html" class="inline-flex items-center gap-2 text-slate-600 hover:text-slate-900 transition-colors">
                        <i data-lucide="arrow-left" class="w-5 h-5"></i>
                        <span>Back to Home</span>
                    </a>
                    <div class="h-6 w-px bg-slate-200"></div>
                    <h1 class="text-2xl font-bold text-slate-900 flex items-center gap-3">
                        <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center">
                            <i data-lucide="server" class="w-5 h-5 text-white"></i>
                        </div>
                        CPMS Dashboard
                    </h1>
                </div>
                <div class="flex items-center space-x-4">
                    <img src="https://codibly.com/wp-content/uploads/2025/01/codibly-_-logo-rgb-kolor-na-jasne-1024x269-1.png" 
                         alt="Codibly Logo" 
                         class="h-6 opacity-90">
                    <div class="flex items-center space-x-2 text-sm">
                        <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse-gentle"></div>
                        <span class="text-slate-600">Live Data</span>
                    </div>
                    <button onclick="openSystemSettings()" class="p-2 rounded-lg bg-slate-100 hover:bg-slate-200 transition-colors">
                        <i data-lucide="settings" class="w-5 h-5 text-slate-600"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Stats Overview -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <div class="bg-white rounded-xl border border-slate-200 p-6 shadow-sm">
                <div class="flex items-center justify-between mb-4">
                    <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                        <i data-lucide="zap" class="w-5 h-5 text-blue-600"></i>
                    </div>
                    <span class="text-xs text-emerald-600 font-medium bg-emerald-100 px-2 py-1 rounded-full">+12%</span>
                </div>
                <p class="text-2xl font-bold text-slate-900 mb-1">247</p>
                <p class="text-sm text-slate-600">Active Stations</p>
            </div>

            <div class="bg-white rounded-xl border border-slate-200 p-6 shadow-sm">
                <div class="flex items-center justify-between mb-4">
                    <div class="w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center">
                        <i data-lucide="users" class="w-5 h-5 text-emerald-600"></i>
                    </div>
                    <span class="text-xs text-emerald-600 font-medium bg-emerald-100 px-2 py-1 rounded-full">+8%</span>
                </div>
                <p class="text-2xl font-bold text-slate-900 mb-1">1,429</p>
                <p class="text-sm text-slate-600">Active Sessions</p>
            </div>

            <div class="bg-white rounded-xl border border-slate-200 p-6 shadow-sm">
                <div class="flex items-center justify-between mb-4">
                    <div class="w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center">
                        <i data-lucide="euro" class="w-5 h-5 text-amber-600"></i>
                    </div>
                    <span class="text-xs text-emerald-600 font-medium bg-emerald-100 px-2 py-1 rounded-full">+15%</span>
                </div>
                <p class="text-2xl font-bold text-slate-900 mb-1">â‚¬42,847</p>
                <p class="text-sm text-slate-600">Daily Revenue</p>
            </div>

            <div class="bg-white rounded-xl border border-slate-200 p-6 shadow-sm">
                <div class="flex items-center justify-between mb-4">
                    <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center">
                        <i data-lucide="battery" class="w-5 h-5 text-purple-600"></i>
                    </div>
                    <span class="text-xs text-slate-500 font-medium bg-slate-100 px-2 py-1 rounded-full">-2%</span>
                </div>
                <p class="text-2xl font-bold text-slate-900 mb-1">8,247</p>
                <p class="text-sm text-slate-600">kWh Delivered</p>
            </div>
        </div>

        <!-- Main Dashboard Grid -->
        <div class="grid lg:grid-cols-3 gap-8">
            <!-- Station Status -->
            <div class="lg:col-span-2">
                <div class="bg-white rounded-xl border border-slate-200 shadow-sm">
                    <div class="p-6 border-b border-slate-200">
                        <div class="flex items-center justify-between">
                            <h2 class="text-lg font-semibold text-slate-900">Station Status</h2>
                            <div class="flex items-center space-x-2">
                                <button onclick="filterStations('all')" id="filter-all" class="px-3 py-1 text-xs font-medium bg-blue-100 text-blue-700 rounded-full">All</button>
                                <button onclick="filterStations('available')" id="filter-available" class="px-3 py-1 text-xs font-medium text-slate-600 hover:bg-slate-100 rounded-full">Available</button>
                                <button onclick="filterStations('occupied')" id="filter-occupied" class="px-3 py-1 text-xs font-medium text-slate-600 hover:bg-slate-100 rounded-full">Occupied</button>
                            </div>
                        </div>
                    </div>
                    <div class="p-6 space-y-4">
                        <!-- Station Items -->
                        <div onclick="openStationDetails('Alpha-01', 'available')" class="flex items-center justify-between p-4 bg-slate-50 rounded-xl hover:bg-slate-100 transition-colors cursor-pointer" data-status="available">
                            <div class="flex items-center space-x-4">
                                <div class="w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center">
                                    <i data-lucide="map-pin" class="w-5 h-5 text-emerald-600"></i>
                                </div>
                                <div>
                                    <p class="font-medium text-slate-900">Station Alpha-01</p>
                                    <p class="text-sm text-slate-600">Downtown Mall - DC Fast</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-4">
                                <div class="text-right">
                                    <p class="text-sm font-medium text-slate-900">89%</p>
                                    <p class="text-xs text-slate-500">Utilization</p>
                                </div>
                                <div class="w-2 h-2 bg-emerald-500 rounded-full"></div>
                            </div>
                        </div>

                        <div onclick="openStationDetails('Beta-02', 'available')" class="flex items-center justify-between p-4 bg-slate-50 rounded-xl hover:bg-slate-100 transition-colors cursor-pointer" data-status="available">
                            <div class="flex items-center space-x-4">
                                <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                                    <i data-lucide="map-pin" class="w-5 h-5 text-blue-600"></i>
                                </div>
                                <div>
                                    <p class="font-medium text-slate-900">Station Beta-02</p>
                                    <p class="text-sm text-slate-600">Airport Terminal - AC</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-4">
                                <div class="text-right">
                                    <p class="text-sm font-medium text-slate-900">67%</p>
                                    <p class="text-xs text-slate-500">Utilization</p>
                                </div>
                                <div class="w-2 h-2 bg-blue-500 rounded-full"></div>
                            </div>
                        </div>

                        <div onclick="openStationDetails('Gamma-03', 'occupied')" class="flex items-center justify-between p-4 bg-slate-50 rounded-xl hover:bg-slate-100 transition-colors cursor-pointer" data-status="occupied">
                            <div class="flex items-center space-x-4">
                                <div class="w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center">
                                    <i data-lucide="map-pin" class="w-5 h-5 text-amber-600"></i>
                                </div>
                                <div>
                                    <p class="font-medium text-slate-900">Station Gamma-03</p>
                                    <p class="text-sm text-slate-600">Shopping Center - Mixed</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-4">
                                <div class="text-right">
                                    <p class="text-sm font-medium text-slate-900">45%</p>
                                    <p class="text-xs text-slate-500">Utilization</p>
                                </div>
                                <div class="w-2 h-2 bg-amber-500 rounded-full"></div>
                            </div>
                        </div>

                        <div onclick="openStationDetails('Delta-04', 'offline')" class="flex items-center justify-between p-4 bg-red-50 rounded-xl hover:bg-red-100 transition-colors cursor-pointer" data-status="offline">
                            <div class="flex items-center space-x-4">
                                <div class="w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center">
                                    <i data-lucide="alert-triangle" class="w-5 h-5 text-red-600"></i>
                                </div>
                                <div>
                                    <p class="font-medium text-slate-900">Station Delta-04</p>
                                    <p class="text-sm text-slate-600">Highway Service - Maintenance</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-4">
                                <div class="text-right">
                                    <p class="text-sm font-medium text-red-600">Offline</p>
                                    <p class="text-xs text-slate-500">Since 2h</p>
                                </div>
                                <div class="w-2 h-2 bg-red-500 rounded-full animate-pulse-gentle"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column -->
            <div class="space-y-6">
                <!-- Network Health -->
                <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                    <h3 class="text-lg font-semibold text-slate-900 mb-4">Network Health</h3>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-slate-600">System Uptime</span>
                            <span class="text-sm font-medium text-slate-900">99.7%</span>
                        </div>
                        <div class="w-full bg-slate-200 rounded-full h-2">
                            <div class="bg-emerald-500 h-2 rounded-full w-[99.7%]"></div>
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-slate-600">Response Time</span>
                            <span class="text-sm font-medium text-slate-900">127ms</span>
                        </div>
                        <div class="w-full bg-slate-200 rounded-full h-2">
                            <div class="bg-blue-500 h-2 rounded-full w-[85%]"></div>
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-slate-600">Error Rate</span>
                            <span class="text-sm font-medium text-slate-900">0.3%</span>
                        </div>
                        <div class="w-full bg-slate-200 rounded-full h-2">
                            <div class="bg-emerald-500 h-2 rounded-full w-[97%]"></div>
                        </div>
                    </div>
                </div>

                <!-- Recent Alerts -->
                <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                    <h3 class="text-lg font-semibold text-slate-900 mb-4">Recent Alerts</h3>
                    <div class="space-y-3">
                        <div class="flex items-start space-x-3">
                            <div class="w-6 h-6 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0">
                                <i data-lucide="alert-circle" class="w-3 h-3 text-red-600"></i>
                            </div>
                            <div class="flex-1">
                                <p class="text-sm font-medium text-slate-900">Station Offline</p>
                                <p class="text-xs text-slate-600">Delta-04 - 2 hours ago</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-3">
                            <div class="w-6 h-6 bg-amber-100 rounded-full flex items-center justify-center flex-shrink-0">
                                <i data-lucide="alert-triangle" class="w-3 h-3 text-amber-600"></i>
                            </div>
                            <div class="flex-1">
                                <p class="text-sm font-medium text-slate-900">High Utilization</p>
                                <p class="text-xs text-slate-600">Alpha-01 - 4 hours ago</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-3">
                            <div class="w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0">
                                <i data-lucide="info" class="w-3 h-3 text-blue-600"></i>
                            </div>
                            <div class="flex-1">
                                <p class="text-sm font-medium text-slate-900">Maintenance Complete</p>
                                <p class="text-xs text-slate-600">Beta-02 - 6 hours ago</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                    <h3 class="text-lg font-semibold text-slate-900 mb-4">Quick Actions</h3>
                    <div class="space-y-2">
                        <button onclick="addNewStation()" class="w-full text-left p-3 rounded-lg hover:bg-slate-50 transition-colors flex items-center space-x-3">
                            <i data-lucide="plus" class="w-4 h-4 text-slate-600"></i>
                            <span class="text-sm font-medium text-slate-900">Add New Station</span>
                        </button>
                        <button onclick="exportReport()" class="w-full text-left p-3 rounded-lg hover:bg-slate-50 transition-colors flex items-center space-x-3">
                            <i data-lucide="download" class="w-4 h-4 text-slate-600"></i>
                            <span class="text-sm font-medium text-slate-900">Export Report</span>
                        </button>
                        <button onclick="openSystemSettings()" class="w-full text-left p-3 rounded-lg hover:bg-slate-50 transition-colors flex items-center space-x-3">
                            <i data-lucide="settings" class="w-4 h-4 text-slate-600"></i>
                            <span class="text-sm font-medium text-slate-900">System Settings</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Integrations Section -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 border-t border-slate-200">
            <div class="mb-6">
                <h2 class="text-2xl font-bold text-slate-900 mb-2">Platform Integrations</h2>
                <p class="text-slate-600">Manage connections to external services and partner networks</p>
            </div>

            <div class="grid md:grid-cols-3 gap-6">
                <!-- Orlen Charge App Integration -->
                <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                    <div class="flex items-center space-x-4 mb-4">
                        <div class="w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center">
                            <span class="text-white font-bold text-lg">O</span>
                        </div>
                        <div>
                            <h3 class="text-lg font-semibold text-slate-900">Orlen Charge</h3>
                            <p class="text-sm text-slate-600">Polish fuel & charging network</p>
                        </div>
                    </div>
                    <div class="space-y-3 mb-4">
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-slate-600">Connection Status</span>
                            <span class="px-2 py-1 bg-emerald-100 text-emerald-700 rounded-full text-xs font-medium">Connected</span>
                        </div>
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-slate-600">Active Stations</span>
                            <span class="font-medium text-slate-900">47</span>
                        </div>
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-slate-600">Revenue Today</span>
                            <span class="font-medium text-slate-900">â‚¬3,247</span>
                        </div>
                    </div>
                    <button onclick="openOrlenIntegration()" class="w-full px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors font-medium">
                        Manage Integration
                    </button>
                </div>

                <!-- Hubject Integration -->
                <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                    <div class="flex items-center space-x-4 mb-4">
                        <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center">
                            <span class="text-white font-bold text-lg">H</span>
                        </div>
                        <div>
                            <h3 class="text-lg font-semibold text-slate-900">Hubject</h3>
                            <p class="text-sm text-slate-600">intercharge roaming network</p>
                        </div>
                    </div>
                    <div class="space-y-3 mb-4">
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-slate-600">Connection Status</span>
                            <span class="px-2 py-1 bg-emerald-100 text-emerald-700 rounded-full text-xs font-medium">Connected</span>
                        </div>
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-slate-600">Roaming Partners</span>
                            <span class="font-medium text-slate-900">247</span>
                        </div>
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-slate-600">Sessions Today</span>
                            <span class="font-medium text-slate-900">1,429</span>
                        </div>
                    </div>
                    <button onclick="openHubjectIntegration()" class="w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium">
                        Manage Integration
                    </button>
                </div>

                <!-- EIPA Integration -->
                <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                    <div class="flex items-center space-x-4 mb-4">
                        <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center">
                            <span class="text-white font-bold text-lg">E</span>
                        </div>
                        <div>
                            <h3 class="text-lg font-semibold text-slate-900">EIPA</h3>
                            <p class="text-sm text-slate-600">European e-Invoice Platform</p>
                        </div>
                    </div>
                    <div class="space-y-3 mb-4">
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-slate-600">Connection Status</span>
                            <span class="px-2 py-1 bg-emerald-100 text-emerald-700 rounded-full text-xs font-medium">Connected</span>
                        </div>
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-slate-600">Invoices Today</span>
                            <span class="font-medium text-slate-900">89</span>
                        </div>
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-slate-600">Compliance</span>
                            <span class="font-medium text-emerald-600">100%</span>
                        </div>
                    </div>
                    <button onclick="openEIPAIntegration()" class="w-full px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors font-medium">
                        Manage Integration
                    </button>
                </div>
            </div>

            <!-- Advanced CPMS Features -->
            <div class="mt-8">
                <h3 class="text-xl font-semibold text-slate-900 mb-6">Advanced Platform Features</h3>
                <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <!-- Tariff Engine -->
                    <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                        <div class="w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center mb-4">
                            <i data-lucide="calculator" class="w-5 h-5 text-amber-600"></i>
                        </div>
                        <h4 class="text-lg font-semibold text-slate-900 mb-2">Tariff Engine</h4>
                        <p class="text-sm text-slate-600 mb-4">Real-time cost calculation and tariff management</p>
                        <button onclick="openTariffEngine()" class="w-full px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white rounded-lg transition-colors font-medium">
                            Manage Tariffs
                        </button>
                    </div>

                    <!-- OCPP Communication -->
                    <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                        <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mb-4">
                            <i data-lucide="radio" class="w-5 h-5 text-green-600"></i>
                        </div>
                        <h4 class="text-lg font-semibold text-slate-900 mb-2">OCPP Gateway</h4>
                        <p class="text-sm text-slate-600 mb-4">Live telemetry and charger commands</p>
                        <button onclick="openOCPPGateway()" class="w-full px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors font-medium">
                            View Telemetry
                        </button>
                    </div>

                    <!-- Session Control -->
                    <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                        <div class="w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center mb-4">
                            <i data-lucide="play" class="w-5 h-5 text-indigo-600"></i>
                        </div>
                        <h4 class="text-lg font-semibold text-slate-900 mb-2">Session Control</h4>
                        <p class="text-sm text-slate-600 mb-4">Start/stop and manage charging sessions</p>
                        <button onclick="openSessionControl()" class="w-full px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors font-medium">
                            Control Sessions
                        </button>
                    </div>

                    <!-- Location Management -->
                    <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                        <div class="w-10 h-10 bg-teal-100 rounded-lg flex items-center justify-center mb-4">
                            <i data-lucide="map" class="w-5 h-5 text-teal-600"></i>
                        </div>
                        <h4 class="text-lg font-semibold text-slate-900 mb-2">Location Manager</h4>
                        <p class="text-sm text-slate-600 mb-4">Configure sites and group chargers</p>
                        <button onclick="openLocationManager()" class="w-full px-4 py-2 bg-teal-600 hover:bg-teal-700 text-white rounded-lg transition-colors font-medium">
                            Manage Locations
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modals -->
    
    <!-- Station Details Modal -->
    <div id="stationDetailsModal" class="hidden fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-white rounded-2xl max-w-2xl w-full mx-auto shadow-2xl border border-slate-200">
            <div class="p-6 border-b border-slate-200">
                <div class="flex items-center justify-between">
                    <h3 class="text-xl font-bold text-slate-900" id="modalStationName">Station Details</h3>
                    <button onclick="closeModal('stationDetailsModal')" class="p-2 hover:bg-slate-100 rounded-lg transition-colors">
                        <i data-lucide="x" class="w-5 h-5 text-slate-600"></i>
                    </button>
                </div>
            </div>
            <div class="p-6" id="stationDetailsContent">
                <!-- Content populated by JavaScript -->
            </div>
            <div class="p-6 border-t border-slate-200 flex justify-end space-x-3">
                <button onclick="closeModal('stationDetailsModal')" class="px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors">
                    Close
                </button>
                <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                    Manage Station
                </button>
            </div>
        </div>
    </div>

    <!-- Add New Station Modal -->
    <div id="addStationModal" class="hidden fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-white rounded-2xl max-w-md w-full mx-auto shadow-2xl border border-slate-200">
            <div class="p-6 border-b border-slate-200">
                <div class="flex items-center justify-between">
                    <h3 class="text-xl font-bold text-slate-900">Add New Station</h3>
                    <button onclick="closeModal('addStationModal')" class="p-2 hover:bg-slate-100 rounded-lg transition-colors">
                        <i data-lucide="x" class="w-5 h-5 text-slate-600"></i>
                    </button>
                </div>
            </div>
            <div class="p-6">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-900 mb-2">Station Name</label>
                        <input type="text" class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Enter station name">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-900 mb-2">Location</label>
                        <input type="text" class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Enter location">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-900 mb-2">Station Type</label>
                        <select class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option>DC Fast</option>
                            <option>AC</option>
                            <option>Mixed</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="p-6 border-t border-slate-200 flex justify-end space-x-3">
                <button onclick="closeModal('addStationModal')" class="px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors">
                    Cancel
                </button>
                <button onclick="submitNewStation()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                    Add Station
                </button>
            </div>
        </div>
    </div>

    <!-- System Settings Modal -->
    <div id="systemSettingsModal" class="hidden fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-white rounded-2xl max-w-2xl w-full mx-auto shadow-2xl border border-slate-200">
            <div class="p-6 border-b border-slate-200">
                <div class="flex items-center justify-between">
                    <h3 class="text-xl font-bold text-slate-900">System Settings</h3>
                    <button onclick="closeModal('systemSettingsModal')" class="p-2 hover:bg-slate-100 rounded-lg transition-colors">
                        <i data-lucide="x" class="w-5 h-5 text-slate-600"></i>
                    </button>
                </div>
            </div>
            <div class="p-6">
                <div class="space-y-6">
                    <div>
                        <h4 class="text-lg font-semibold text-slate-900 mb-4">General Settings</h4>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-slate-700">Auto-refresh Dashboard</span>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" checked class="sr-only peer">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                </label>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-slate-700">Email Notifications</span>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" checked class="sr-only peer">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div>
                        <h4 class="text-lg font-semibold text-slate-900 mb-4">Alert Thresholds</h4>
                        <div class="space-y-3">
                            <div>
                                <label class="block text-sm text-slate-700 mb-1">High Utilization (%)</label>
                                <input type="range" min="50" max="100" value="85" class="w-full">
                                <div class="text-xs text-slate-500">85%</div>
                            </div>
                            <div>
                                <label class="block text-sm text-slate-700 mb-1">Low Battery Alert (%)</label>
                                <input type="range" min="5" max="30" value="15" class="w-full">
                                <div class="text-xs text-slate-500">15%</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="p-6 border-t border-slate-200 flex justify-end space-x-3">
                <button onclick="closeModal('systemSettingsModal')" class="px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors">
                    Cancel
                </button>
                <button onclick="saveSettings()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                    Save Settings
                </button>
            </div>
        </div>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();
        
        // Modal Management
        function closeModal(modalId) {
            document.getElementById(modalId).classList.add('hidden');
        }
        
        function showModal(modalId) {
            document.getElementById(modalId).classList.remove('hidden');
        }
        
        // Station Filtering
        function filterStations(status) {
            const stations = document.querySelectorAll('[data-status]');
            const buttons = document.querySelectorAll('[id^="filter-"]');
            
            // Reset button styles
            buttons.forEach(btn => {
                btn.className = 'px-3 py-1 text-xs font-medium text-slate-600 hover:bg-slate-100 rounded-full';
            });
            
            // Set active button style
            const activeBtn = document.getElementById(`filter-${status}`);
            activeBtn.className = 'px-3 py-1 text-xs font-medium bg-blue-100 text-blue-700 rounded-full';
            
            // Show/hide stations
            stations.forEach(station => {
                if (status === 'all') {
                    station.style.display = 'flex';
                } else {
                    if (station.dataset.status === status) {
                        station.style.display = 'flex';
                    } else {
                        station.style.display = 'none';
                    }
                }
            });
        }
        
        // Station Details
        function openStationDetails(stationId, status) {
            const modal = document.getElementById('stationDetailsModal');
            const nameEl = document.getElementById('modalStationName');
            const contentEl = document.getElementById('stationDetailsContent');
            
            nameEl.textContent = `Station ${stationId}`;
            
            // Mock station data
            const stationData = {
                'Alpha-01': { location: 'Downtown Mall', type: 'DC Fast', power: '150 kW', utilization: '89%', connectors: 4, revenue: 'â‚¬1,247/day' },
                'Beta-02': { location: 'Airport Terminal', type: 'AC', power: '22 kW', utilization: '67%', connectors: 6, revenue: 'â‚¬847/day' },
                'Gamma-03': { location: 'Shopping Center', type: 'Mixed', power: '50 kW', utilization: '45%', connectors: 8, revenue: 'â‚¬654/day' },
                'Delta-04': { location: 'Highway Service', type: 'Maintenance', power: 'Offline', utilization: '0%', connectors: 4, revenue: 'â‚¬0/day' }
            };
            
            const data = stationData[stationId] || {};
            
            contentEl.innerHTML = `
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-semibold text-slate-900 mb-3">Station Information</h4>
                        <div class="space-y-2">
                            <div class="flex justify-between">
                                <span class="text-slate-600">Location:</span>
                                <span class="font-medium">${data.location}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-slate-600">Type:</span>
                                <span class="font-medium">${data.type}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-slate-600">Max Power:</span>
                                <span class="font-medium">${data.power}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-slate-600">Connectors:</span>
                                <span class="font-medium">${data.connectors}</span>
                            </div>
                        </div>
                    </div>
                    <div>
                        <h4 class="font-semibold text-slate-900 mb-3">Performance</h4>
                        <div class="space-y-2">
                            <div class="flex justify-between">
                                <span class="text-slate-600">Utilization:</span>
                                <span class="font-medium">${data.utilization}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-slate-600">Daily Revenue:</span>
                                <span class="font-medium">${data.revenue}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-slate-600">Status:</span>
                                <span class="font-medium capitalize ${status === 'available' ? 'text-emerald-600' : status === 'occupied' ? 'text-amber-600' : 'text-red-600'}">${status}</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mt-6">
                    <h4 class="font-semibold text-slate-900 mb-3">Recent Activity</h4>
                    <div class="bg-slate-50 rounded-lg p-4">
                        <div class="text-sm text-slate-600">
                            â€¢ Last charging session: 15 minutes ago<br>
                            â€¢ Average session duration: 45 minutes<br>
                            â€¢ Peak hours: 8:00-10:00 AM, 5:00-7:00 PM
                        </div>
                    </div>
                </div>
            `;
            
            showModal('stationDetailsModal');
            lucide.createIcons();
        }
        
        // Add New Station
        function addNewStation() {
            showModal('addStationModal');
        }
        
        function submitNewStation() {
            // In a real app, this would send data to the server
            closeModal('addStationModal');
            alert('âœ… New station added successfully! The station will appear in the dashboard shortly.');
        }
        
        // System Settings
        function openSystemSettings() {
            showModal('systemSettingsModal');
        }
        
        function saveSettings() {
            closeModal('systemSettingsModal');
            alert('âœ… Settings saved successfully!');
        }
        
        // Export Report
        function exportReport() {
            // Simulate export process
            const exportTypes = ['PDF Report', 'CSV Data', 'Excel Spreadsheet'];
            const selectedExport = exportTypes[Math.floor(Math.random() * exportTypes.length)];
            alert(`ðŸ“Š Generating ${selectedExport}...\n\nYour report will be ready for download in a few moments and sent to your email.`);
        }

        // Integration Functions
        function openOrlenIntegration() {
            const modalContent = `
                <div id="integrationModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                    <div class="bg-white rounded-2xl shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto">
                        <div class="p-6 border-b border-slate-200">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-10 h-10 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center">
                                        <span class="text-white font-bold text-lg">O</span>
                                    </div>
                                    <h2 class="text-xl font-semibold text-slate-900">Orlen Charge Integration</h2>
                                </div>
                                <button onclick="closeIntegrationModal()" class="text-slate-500 hover:text-slate-700">
                                    <i data-lucide="x" class="w-6 h-6"></i>
                                </button>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="space-y-6">
                                <div class="grid grid-cols-3 gap-4">
                                    <div class="text-center p-4 bg-red-50 rounded-xl">
                                        <p class="text-2xl font-bold text-red-600">47</p>
                                        <p class="text-sm text-red-700">Connected Stations</p>
                                    </div>
                                    <div class="text-center p-4 bg-emerald-50 rounded-xl">
                                        <p class="text-2xl font-bold text-emerald-600">â‚¬3,247</p>
                                        <p class="text-sm text-emerald-700">Today's Revenue</p>
                                    </div>
                                    <div class="text-center p-4 bg-blue-50 rounded-xl">
                                        <p class="text-2xl font-bold text-blue-600">247</p>
                                        <p class="text-sm text-blue-700">Active Users</p>
                                    </div>
                                </div>
                                <div>
                                    <h3 class="text-lg font-medium text-slate-900 mb-3">Integration Settings</h3>
                                    <div class="space-y-4">
                                        <div>
                                            <label class="block text-sm font-medium text-slate-700 mb-2">API Endpoint</label>
                                            <input type="text" value="https://api.orlen.pl/charging/v2" readonly class="w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-slate-700 mb-2">Connection Status</label>
                                            <div class="flex items-center space-x-2">
                                                <div class="w-3 h-3 bg-emerald-500 rounded-full"></div>
                                                <span class="text-emerald-600 font-medium">Connected & Syncing</span>
                                            </div>
                                        </div>
                                        <div>
                                            <label class="flex items-center">
                                                <input type="checkbox" checked class="rounded border-gray-300 text-red-600">
                                                <span class="ml-2 text-sm text-slate-700">Enable automatic station sync</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex justify-end space-x-3">
                                    <button onclick="closeIntegrationModal()" class="px-4 py-2 text-slate-600 hover:text-slate-800">Cancel</button>
                                    <button class="px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg">Save Changes</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modalContent);
            lucide.createIcons();
        }

        function openHubjectIntegration() {
            const modalContent = `
                <div id="integrationModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                    <div class="bg-white rounded-2xl shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto">
                        <div class="p-6 border-b border-slate-200">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center">
                                        <span class="text-white font-bold text-lg">H</span>
                                    </div>
                                    <h2 class="text-xl font-semibold text-slate-900">Hubject intercharge Integration</h2>
                                </div>
                                <button onclick="closeIntegrationModal()" class="text-slate-500 hover:text-slate-700">
                                    <i data-lucide="x" class="w-6 h-6"></i>
                                </button>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="space-y-6">
                                <div class="grid grid-cols-3 gap-4">
                                    <div class="text-center p-4 bg-blue-50 rounded-xl">
                                        <p class="text-2xl font-bold text-blue-600">247</p>
                                        <p class="text-sm text-blue-700">Roaming Partners</p>
                                    </div>
                                    <div class="text-center p-4 bg-emerald-50 rounded-xl">
                                        <p class="text-2xl font-bold text-emerald-600">1,429</p>
                                        <p class="text-sm text-emerald-700">Sessions Today</p>
                                    </div>
                                    <div class="text-center p-4 bg-purple-50 rounded-xl">
                                        <p class="text-2xl font-bold text-purple-600">â‚¬12,847</p>
                                        <p class="text-sm text-purple-700">Roaming Revenue</p>
                                    </div>
                                </div>
                                <div>
                                    <h3 class="text-lg font-medium text-slate-900 mb-3">Roaming Network Status</h3>
                                    <div class="space-y-3">
                                        <div class="flex items-center justify-between p-3 border border-slate-200 rounded-lg">
                                            <span class="text-slate-700">CPO Registration</span>
                                            <span class="px-2 py-1 bg-emerald-100 text-emerald-700 rounded-full text-xs font-medium">Active</span>
                                        </div>
                                        <div class="flex items-center justify-between p-3 border border-slate-200 rounded-lg">
                                            <span class="text-slate-700">eMSP Registration</span>
                                            <span class="px-2 py-1 bg-emerald-100 text-emerald-700 rounded-full text-xs font-medium">Active</span>
                                        </div>
                                        <div class="flex items-center justify-between p-3 border border-slate-200 rounded-lg">
                                            <span class="text-slate-700">OICP Version</span>
                                            <span class="font-medium text-slate-900">2.3</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex justify-end space-x-3">
                                    <button onclick="closeIntegrationModal()" class="px-4 py-2 text-slate-600 hover:text-slate-800">Cancel</button>
                                    <button class="px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg">Manage Settings</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modalContent);
            lucide.createIcons();
        }

        function openEIPAIntegration() {
            const modalContent = `
                <div id="integrationModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                    <div class="bg-white rounded-2xl shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto">
                        <div class="p-6 border-b border-slate-200">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-10 h-10 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center">
                                        <span class="text-white font-bold text-lg">E</span>
                                    </div>
                                    <h2 class="text-xl font-semibold text-slate-900">EIPA Integration</h2>
                                </div>
                                <button onclick="closeIntegrationModal()" class="text-slate-500 hover:text-slate-700">
                                    <i data-lucide="x" class="w-6 h-6"></i>
                                </button>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="space-y-6">
                                <div class="grid grid-cols-3 gap-4">
                                    <div class="text-center p-4 bg-purple-50 rounded-xl">
                                        <p class="text-2xl font-bold text-purple-600">89</p>
                                        <p class="text-sm text-purple-700">Invoices Today</p>
                                    </div>
                                    <div class="text-center p-4 bg-emerald-50 rounded-xl">
                                        <p class="text-2xl font-bold text-emerald-600">100%</p>
                                        <p class="text-sm text-emerald-700">Compliance Rate</p>
                                    </div>
                                    <div class="text-center p-4 bg-blue-50 rounded-xl">
                                        <p class="text-2xl font-bold text-blue-600">â‚¬47,832</p>
                                        <p class="text-sm text-blue-700">Monthly Volume</p>
                                    </div>
                                </div>
                                <div>
                                    <h3 class="text-lg font-medium text-slate-900 mb-3">Invoice Processing</h3>
                                    <div class="overflow-x-auto">
                                        <table class="w-full text-sm">
                                            <thead class="bg-slate-50">
                                                <tr>
                                                    <th class="px-4 py-3 text-left">Invoice ID</th>
                                                    <th class="px-4 py-3 text-left">Amount</th>
                                                    <th class="px-4 py-3 text-left">Status</th>
                                                    <th class="px-4 py-3 text-left">Date</th>
                                                </tr>
                                            </thead>
                                            <tbody class="divide-y divide-slate-200">
                                                <tr>
                                                    <td class="px-4 py-3">INV-2024-0001</td>
                                                    <td class="px-4 py-3 font-medium">â‚¬247.50</td>
                                                    <td class="px-4 py-3"><span class="px-2 py-1 bg-emerald-100 text-emerald-700 rounded-full text-xs">Processed</span></td>
                                                    <td class="px-4 py-3">Today</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-4 py-3">INV-2024-0002</td>
                                                    <td class="px-4 py-3 font-medium">â‚¬1,247.89</td>
                                                    <td class="px-4 py-3"><span class="px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs">Processing</span></td>
                                                    <td class="px-4 py-3">Today</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="flex justify-end space-x-3">
                                    <button onclick="closeIntegrationModal()" class="px-4 py-2 text-slate-600 hover:text-slate-800">Cancel</button>
                                    <button class="px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg">Export Invoices</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modalContent);
            lucide.createIcons();
        }

        // Advanced CPMS Feature Functions
        function openTariffEngine() {
            const modalContent = `
                <div id="integrationModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                    <div class="bg-white rounded-2xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                        <div class="p-6 border-b border-slate-200">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center">
                                        <i data-lucide="calculator" class="w-5 h-5 text-amber-600"></i>
                                    </div>
                                    <h2 class="text-xl font-semibold text-slate-900">Tariff Engine</h2>
                                </div>
                                <button onclick="closeIntegrationModal()" class="text-slate-500 hover:text-slate-700">
                                    <i data-lucide="x" class="w-6 h-6"></i>
                                </button>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="grid md:grid-cols-2 gap-6">
                                <div>
                                    <h3 class="text-lg font-medium text-slate-900 mb-3">Active Tariffs</h3>
                                    <div class="space-y-3">
                                        <div class="p-4 border border-slate-200 rounded-lg">
                                            <div class="flex justify-between items-start mb-2">
                                                <h4 class="font-medium text-slate-900">Standard DC Fast</h4>
                                                <span class="px-2 py-1 bg-emerald-100 text-emerald-700 rounded-full text-xs">Active</span>
                                            </div>
                                            <p class="text-sm text-slate-600 mb-2">â‚¬0.45/kWh + â‚¬0.10/min after 45min</p>
                                            <p class="text-xs text-slate-500">Applied to 47 stations</p>
                                        </div>
                                        <div class="p-4 border border-slate-200 rounded-lg">
                                            <div class="flex justify-between items-start mb-2">
                                                <h4 class="font-medium text-slate-900">AC Standard</h4>
                                                <span class="px-2 py-1 bg-emerald-100 text-emerald-700 rounded-full text-xs">Active</span>
                                            </div>
                                            <p class="text-sm text-slate-600 mb-2">â‚¬0.28/kWh</p>
                                            <p class="text-xs text-slate-500">Applied to 89 stations</p>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <h3 class="text-lg font-medium text-slate-900 mb-3">Create New Tariff</h3>
                                    <div class="space-y-4">
                                        <div>
                                            <label class="block text-sm font-medium text-slate-700 mb-2">Tariff Name</label>
                                            <input type="text" placeholder="Premium DC Fast" class="w-full px-3 py-2 border border-slate-300 rounded-lg">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-slate-700 mb-2">Base Rate (â‚¬/kWh)</label>
                                            <input type="number" value="0.45" step="0.01" class="w-full px-3 py-2 border border-slate-300 rounded-lg">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-slate-700 mb-2">Time-based Rate (â‚¬/min)</label>
                                            <input type="number" value="0.10" step="0.01" class="w-full px-3 py-2 border border-slate-300 rounded-lg">
                                        </div>
                                        <button class="w-full px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white rounded-lg">Create Tariff</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modalContent);
            lucide.createIcons();
        }

        function openOCPPGateway() {
            const modalContent = `
                <div id="integrationModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                    <div class="bg-white rounded-2xl shadow-xl max-w-5xl w-full max-h-[90vh] overflow-y-auto">
                        <div class="p-6 border-b border-slate-200">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
                                        <i data-lucide="radio" class="w-5 h-5 text-green-600"></i>
                                    </div>
                                    <h2 class="text-xl font-semibold text-slate-900">OCPP Gateway - Live Telemetry</h2>
                                </div>
                                <button onclick="closeIntegrationModal()" class="text-slate-500 hover:text-slate-700">
                                    <i data-lucide="x" class="w-6 h-6"></i>
                                </button>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="grid grid-cols-4 gap-4 mb-6">
                                <div class="text-center p-4 bg-green-50 rounded-xl">
                                    <p class="text-2xl font-bold text-green-600">247</p>
                                    <p class="text-sm text-green-700">Connected Chargers</p>
                                </div>
                                <div class="text-center p-4 bg-blue-50 rounded-xl">
                                    <p class="text-2xl font-bold text-blue-600">1.6s</p>
                                    <p class="text-sm text-blue-700">Avg Response Time</p>
                                </div>
                                <div class="text-center p-4 bg-purple-50 rounded-xl">
                                    <p class="text-2xl font-bold text-purple-600">99.7%</p>
                                    <p class="text-sm text-purple-700">Uptime</p>
                                </div>
                                <div class="text-center p-4 bg-amber-50 rounded-xl">
                                    <p class="text-2xl font-bold text-amber-600">3</p>
                                    <p class="text-sm text-amber-700">Active Alarms</p>
                                </div>
                            </div>
                            <div>
                                <h3 class="text-lg font-medium text-slate-900 mb-3">Real-time Messages</h3>
                                <div class="bg-slate-50 rounded-lg p-4 h-64 overflow-y-auto font-mono text-sm">
                                    <div class="space-y-1">
                                        <div class="text-green-600">[12:34:56] Station Alpha-01: StatusNotification - Available</div>
                                        <div class="text-blue-600">[12:34:55] Station Beta-02: MeterValues - 24.7 kWh</div>
                                        <div class="text-green-600">[12:34:54] Station Gamma-03: StartTransaction - Session 8472</div>
                                        <div class="text-amber-600">[12:34:52] Station Delta-04: Heartbeat - Online</div>
                                        <div class="text-red-600">[12:34:50] Station Echo-05: FaultReport - Ground fault detected</div>
                                        <div class="text-blue-600">[12:34:49] Station Alpha-01: MeterValues - 18.2 kWh</div>
                                        <div class="text-green-600">[12:34:47] Station Beta-02: StopTransaction - Session 8471 completed</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modalContent);
            lucide.createIcons();
        }

        function openSessionControl() {
            const modalContent = `
                <div id="integrationModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                    <div class="bg-white rounded-2xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                        <div class="p-6 border-b border-slate-200">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center">
                                        <i data-lucide="play" class="w-5 h-5 text-indigo-600"></i>
                                    </div>
                                    <h2 class="text-xl font-semibold text-slate-900">Session Control Center</h2>
                                </div>
                                <button onclick="closeIntegrationModal()" class="text-slate-500 hover:text-slate-700">
                                    <i data-lucide="x" class="w-6 h-6"></i>
                                </button>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="space-y-6">
                                <div class="grid grid-cols-3 gap-4">
                                    <div class="text-center p-4 bg-indigo-50 rounded-xl">
                                        <p class="text-2xl font-bold text-indigo-600">89</p>
                                        <p class="text-sm text-indigo-700">Active Sessions</p>
                                    </div>
                                    <div class="text-center p-4 bg-emerald-50 rounded-xl">
                                        <p class="text-2xl font-bold text-emerald-600">247</p>
                                        <p class="text-sm text-emerald-700">Completed Today</p>
                                    </div>
                                    <div class="text-center p-4 bg-amber-50 rounded-xl">
                                        <p class="text-2xl font-bold text-amber-600">â‚¬4,732</p>
                                        <p class="text-sm text-amber-700">Session Revenue</p>
                                    </div>
                                </div>
                                <div>
                                    <h3 class="text-lg font-medium text-slate-900 mb-3">Active Charging Sessions</h3>
                                    <div class="overflow-x-auto">
                                        <table class="w-full text-sm">
                                            <thead class="bg-slate-50">
                                                <tr>
                                                    <th class="px-4 py-3 text-left">Session ID</th>
                                                    <th class="px-4 py-3 text-left">Station</th>
                                                    <th class="px-4 py-3 text-left">Duration</th>
                                                    <th class="px-4 py-3 text-left">Energy</th>
                                                    <th class="px-4 py-3 text-left">Cost</th>
                                                    <th class="px-4 py-3 text-left">Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody class="divide-y divide-slate-200">
                                                <tr>
                                                    <td class="px-4 py-3 font-mono">8472</td>
                                                    <td class="px-4 py-3">Alpha-01</td>
                                                    <td class="px-4 py-3">23:47</td>
                                                    <td class="px-4 py-3">24.7 kWh</td>
                                                    <td class="px-4 py-3">â‚¬11.12</td>
                                                    <td class="px-4 py-3">
                                                        <button class="px-2 py-1 bg-red-600 hover:bg-red-700 text-white text-xs rounded">Stop</button>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="px-4 py-3 font-mono">8473</td>
                                                    <td class="px-4 py-3">Beta-02</td>
                                                    <td class="px-4 py-3">1:12:34</td>
                                                    <td class="px-4 py-3">18.2 kWh</td>
                                                    <td class="px-4 py-3">â‚¬5.10</td>
                                                    <td class="px-4 py-3">
                                                        <button class="px-2 py-1 bg-red-600 hover:bg-red-700 text-white text-xs rounded">Stop</button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modalContent);
            lucide.createIcons();
        }

        function openLocationManager() {
            const modalContent = `
                <div id="integrationModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                    <div class="bg-white rounded-2xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                        <div class="p-6 border-b border-slate-200">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-10 h-10 bg-teal-100 rounded-lg flex items-center justify-center">
                                        <i data-lucide="map" class="w-5 h-5 text-teal-600"></i>
                                    </div>
                                    <h2 class="text-xl font-semibold text-slate-900">Location Management</h2>
                                </div>
                                <button onclick="closeIntegrationModal()" class="text-slate-500 hover:text-slate-700">
                                    <i data-lucide="x" class="w-6 h-6"></i>
                                </button>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="grid md:grid-cols-2 gap-6">
                                <div>
                                    <h3 class="text-lg font-medium text-slate-900 mb-3">Site Groups</h3>
                                    <div class="space-y-3">
                                        <div class="p-4 border border-slate-200 rounded-lg">
                                            <div class="flex justify-between items-start mb-2">
                                                <h4 class="font-medium text-slate-900">Downtown Hub</h4>
                                                <span class="text-sm text-slate-600">12 stations</span>
                                            </div>
                                            <p class="text-sm text-slate-600">Shopping centers and business district</p>
                                        </div>
                                        <div class="p-4 border border-slate-200 rounded-lg">
                                            <div class="flex justify-between items-start mb-2">
                                                <h4 class="font-medium text-slate-900">Highway Network</h4>
                                                <span class="text-sm text-slate-600">28 stations</span>
                                            </div>
                                            <p class="text-sm text-slate-600">Major highways and service areas</p>
                                        </div>
                                        <div class="p-4 border border-slate-200 rounded-lg">
                                            <div class="flex justify-between items-start mb-2">
                                                <h4 class="font-medium text-slate-900">Residential Areas</h4>
                                                <span class="text-sm text-slate-600">47 stations</span>
                                            </div>
                                            <p class="text-sm text-slate-600">Apartment complexes and neighborhoods</p>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <h3 class="text-lg font-medium text-slate-900 mb-3">Create New Location Group</h3>
                                    <div class="space-y-4">
                                        <div>
                                            <label class="block text-sm font-medium text-slate-700 mb-2">Group Name</label>
                                            <input type="text" placeholder="Airport Terminal" class="w-full px-3 py-2 border border-slate-300 rounded-lg">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-slate-700 mb-2">Description</label>
                                            <textarea placeholder="Terminal buildings and parking areas" rows="3" class="w-full px-3 py-2 border border-slate-300 rounded-lg"></textarea>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-slate-700 mb-2">Default Tariff</label>
                                            <select class="w-full px-3 py-2 border border-slate-300 rounded-lg">
                                                <option>Standard DC Fast</option>
                                                <option>AC Standard</option>
                                                <option>Premium High-Speed</option>
                                            </select>
                                        </div>
                                        <button class="w-full px-4 py-2 bg-teal-600 hover:bg-teal-700 text-white rounded-lg">Create Group</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modalContent);
            lucide.createIcons();
        }

        function closeIntegrationModal() {
            const modal = document.getElementById('integrationModal');
            if (modal) {
                modal.remove();
            }
        }
        
        // Close modals when clicking outside
        window.addEventListener('click', function(e) {
            if (e.target.classList.contains('backdrop-blur-sm')) {
                const modals = ['stationDetailsModal', 'addStationModal', 'systemSettingsModal'];
                modals.forEach(modalId => {
                    const modal = document.getElementById(modalId);
                    if (!modal.classList.contains('hidden')) {
                        closeModal(modalId);
                    }
                });
            }
        });
    </script>
</body>
</html>